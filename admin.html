<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="My World - 后台管理">
    <title>后台管理 | My World</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-[#0A0A0F] text-white min-h-screen">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-[#00F0FF] text-black px-4 py-2 rounded-lg z-50">
        跳转到主要内容
    </a>

    <!-- Navigation -->
    <nav class="navbar fixed top-0 left-0 right-0 z-50 transition-all duration-300" role="navigation" aria-label="主导航">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 lg:h-20">
                <!-- Logo -->
                <a href="index.html" class="logo flex items-center gap-2 group" aria-label="返回首页">
                    <span class="logo-text font-['Space_Grotesk'] text-xl lg:text-2xl font-bold tracking-wider">
                        MY WORLD
                    </span>
                    <div class="logo-dot w-2 h-2 bg-[#00F0FF] rounded-full animate-pulse"></div>
                </a>

                <!-- Desktop Navigation -->
                <ul class="nav-menu hidden md:flex items-center gap-1 lg:gap-2">
                    <li><a href="index.html" class="nav-link px-4 py-2 rounded-lg text-sm lg:text-base font-medium transition-all duration-300 hover:bg-[#00F0FF]/10">返回首页</a></li>
                </ul>

                <!-- Mobile Menu Button -->
                <a href="index.html" class="md:hidden inline-flex items-center gap-2 px-4 py-2 bg-[#00F0FF] text-black font-semibold rounded-lg transition-all duration-300 hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>返回</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="pt-24 pb-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Page Header -->
            <div class="page-header mb-12">
                <h1 class="font-['Space_Grotesk'] text-3xl sm:text-4xl lg:text-5xl font-bold mb-4">
                    后台管理
                </h1>
                <p class="text-[#B8B8C8] text-lg">
                    管理您的个人信息、项目、技能和工具资源
                </p>
            </div>

            <!-- Admin Tabs -->
            <div class="admin-tabs flex flex-wrap gap-2 mb-8 border-b border-white/10 pb-4">
                <button class="tab-btn active px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-[#00F0FF]/10" data-tab="personal">
                    <i class="fas fa-user mr-2"></i>个人信息
                </button>
                <button class="tab-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-[#00F0FF]/10" data-tab="projects">
                    <i class="fas fa-project-diagram mr-2"></i>项目管理
                </button>
                <button class="tab-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-[#00F0FF]/10" data-tab="skills">
                    <i class="fas fa-code mr-2"></i>技能管理
                </button>
                <button class="tab-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-[#00F0FF]/10" data-tab="tools">
                    <i class="fas fa-tools mr-2"></i>工具管理
                </button>
                <button class="tab-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-[#00F0FF]/10" data-tab="stats">
                    <i class="fas fa-chart-bar mr-2"></i>统计数据
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Personal Info Tab -->
                <div id="personal-tab" class="tab-pane active">
                    <div class="bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8">
                        <h2 class="font-['Space_Grotesk'] text-2xl font-bold mb-6">编辑个人信息</h2>
                        <form id="personal-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="name" class="block text-sm font-medium mb-2">姓名</label>
                                    <input type="text" id="name" name="name" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                                <div class="form-group">
                                    <label for="title" class="block text-sm font-medium mb-2">职位</label>
                                    <input type="text" id="title" name="title" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="description" class="block text-sm font-medium mb-2">简介</label>
                                <textarea id="description" name="description" rows="4" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300 resize-none"></textarea>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="email" class="block text-sm font-medium mb-2">邮箱</label>
                                    <input type="email" id="email" name="email" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                                <div class="form-group">
                                    <label for="phone" class="block text-sm font-medium mb-2">电话</label>
                                    <input type="tel" id="phone" name="phone" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="location" class="block text-sm font-medium mb-2">位置</label>
                                <input type="text" id="location" name="location" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                            </div>
                            <div class="form-group">
                                <label for="avatar" class="block text-sm font-medium mb-2">头像URL</label>
                                <input type="url" id="avatar" name="avatar" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                            </div>
                            <button type="submit" class="btn btn-primary w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#00F0FF] to-[#00B8C4] text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(0,240,255,0.6)]">
                                <i class="fas fa-save"></i>
                                <span>保存个人信息</span>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Projects Tab -->
                <div id="projects-tab" class="tab-pane hidden">
                    <div class="bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="font-['Space_Grotesk'] text-2xl font-bold">项目管理</h2>
                            <button id="add-project-btn" class="btn btn-outline inline-flex items-center gap-2 px-6 py-3 border-2 border-[#00F0FF] text-[#00F0FF] font-semibold rounded-xl transition-all duration-300 hover:bg-[#00F0FF] hover:text-white">
                                <i class="fas fa-plus"></i>
                                <span>添加项目</span>
                            </button>
                        </div>
                        <div id="projects-list" class="space-y-4">
                            <!-- Projects will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Skills Tab -->
                <div id="skills-tab" class="tab-pane hidden">
                    <div class="bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="font-['Space_Grotesk'] text-2xl font-bold">技能管理</h2>
                            <button id="add-skill-btn" class="btn btn-outline inline-flex items-center gap-2 px-6 py-3 border-2 border-[#00F0FF] text-[#00F0FF] font-semibold rounded-xl transition-all duration-300 hover:bg-[#00F0FF] hover:text-white">
                                <i class="fas fa-plus"></i>
                                <span>添加技能</span>
                            </button>
                        </div>
                        <div id="skills-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Skills will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Tools Tab -->
                <div id="tools-tab" class="tab-pane hidden">
                    <div class="bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="font-['Space_Grotesk'] text-2xl font-bold">工具管理</h2>
                            <button id="add-tool-btn" class="btn btn-outline inline-flex items-center gap-2 px-6 py-3 border-2 border-[#00F0FF] text-[#00F0FF] font-semibold rounded-xl transition-all duration-300 hover:bg-[#00F0FF] hover:text-white">
                                <i class="fas fa-plus"></i>
                                <span>添加工具</span>
                            </button>
                        </div>
                        <div id="tools-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Tools will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Stats Tab -->
                <div id="stats-tab" class="tab-pane hidden">
                    <div class="bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8">
                        <h2 class="font-['Space_Grotesk'] text-2xl font-bold mb-6">统计数据</h2>
                        <form id="stats-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="experience" class="block text-sm font-medium mb-2">年经验</label>
                                    <input type="number" id="experience" name="experience" min="0" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                                <div class="form-group">
                                    <label for="projects-count" class="block text-sm font-medium mb-2">项目完成</label>
                                    <input type="number" id="projects-count" name="projects" min="0" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="clients" class="block text-sm font-medium mb-2">满意客户</label>
                                    <input type="number" id="clients" name="clients" min="0" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                                <div class="form-group">
                                    <label for="commits" class="block text-sm font-medium mb-2">代码提交</label>
                                    <input type="number" id="commits" name="commits" min="0" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#00F0FF] to-[#00B8C4] text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(0,240,255,0.6)]">
                                <i class="fas fa-save"></i>
                                <span>保存统计数据</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 z-[100] hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" id="modal-backdrop"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="modal-content bg-[#12121A] backdrop-blur-xl border border-white/10 rounded-3xl p-6 lg:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-6">
                    <h3 id="modal-title" class="font-['Space_Grotesk'] text-2xl font-bold">添加项目</h3>
                    <button id="modal-close" class="w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-[#B8B8C8] hover:bg-[#FF00E6] hover:text-white hover:border-[#FF00E6] transition-all duration-300" aria-label="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="modal-body">
                    <!-- Modal content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/main.js"></script>
    <script>
        // Admin Panel JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.getAttribute('data-tab');
                    
                    // Update active states
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    tabPanes.forEach(pane => {
                        pane.classList.add('hidden');
                        pane.classList.remove('active');
                    });
                    
                    const activePane = document.getElementById(`${tabId}-tab`);
                    activePane.classList.remove('hidden');
                    activePane.classList.add('active');
                });
            });

            // Load data from main.js
            if (window.MyWorldAPI) {
                loadPersonalInfo();
                loadProjects();
                loadSkills();
                loadTools();
                loadStats();
            }

            // Personal form
            const personalForm = document.getElementById('personal-form');
            if (personalForm) {
                personalForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const formData = new FormData(personalForm);
                    const data = Object.fromEntries(formData);
                    
                    if (window.MyWorldAPI) {
                        window.MyWorldAPI.state.personal = {
                            ...window.MyWorldAPI.state.personal,
                            ...data
                        };
                        localStorage.setItem('myWorldData', JSON.stringify({
                            personal: window.MyWorldAPI.state.personal,
                            projects: window.MyWorldAPI.state.projects,
                            skills: window.MyWorldAPI.state.skills,
                            tools: window.MyWorldAPI.state.tools,
                            stats: window.MyWorldAPI.state.stats
                        }));
                        window.MyWorldAPI.showNotification('个人信息保存成功！', 'success');
                    }
                });
            }

            // Stats form
            const statsForm = document.getElementById('stats-form');
            if (statsForm) {
                statsForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const formData = new FormData(statsForm);
                    const data = Object.fromEntries(formData);
                    
                    if (window.MyWorldAPI) {
                        window.MyWorldAPI.state.stats = {
                            experience: parseInt(data.experience),
                            projects: parseInt(data.projects),
                            clients: parseInt(data.clients),
                            commits: parseInt(data.commits)
                        };
                        localStorage.setItem('myWorldData', JSON.stringify({
                            personal: window.MyWorldAPI.state.personal,
                            projects: window.MyWorldAPI.state.projects,
                            skills: window.MyWorldAPI.state.skills,
                            tools: window.MyWorldAPI.state.tools,
                            stats: window.MyWorldAPI.state.stats
                        }));
                        window.MyWorldAPI.showNotification('统计数据保存成功！', 'success');
                    }
                });
            }

            // Add project button
            const addProjectBtn = document.getElementById('add-project-btn');
            if (addProjectBtn) {
                addProjectBtn.addEventListener('click', () => {
                    openModal('project');
                });
            }

            // Add skill button
            const addSkillBtn = document.getElementById('add-skill-btn');
            if (addSkillBtn) {
                addSkillBtn.addEventListener('click', () => {
                    openModal('skill');
                });
            }

            // Add tool button
            const addToolBtn = document.getElementById('add-tool-btn');
            if (addToolBtn) {
                addToolBtn.addEventListener('click', () => {
                    openModal('tool');
                });
            }

            // Modal close
            const modalClose = document.getElementById('modal-close');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modal = document.getElementById('modal');

            const closeModal = () => {
                modal.classList.add('hidden');
                document.getElementById('modal-body').innerHTML = '';
            };

            modalClose.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', closeModal);
        });

        // Load personal info
        function loadPersonalInfo() {
            const personal = window.MyWorldAPI.state.personal;
            if (personal) {
                document.getElementById('name').value = personal.name || '';
                document.getElementById('title').value = personal.title || '';
                document.getElementById('description').value = personal.description || '';
                document.getElementById('email').value = personal.email || '';
                document.getElementById('phone').value = personal.phone || '';
                document.getElementById('location').value = personal.location || '';
                document.getElementById('avatar').value = personal.avatar || '';
            }
        }

        // Load projects
        function loadProjects() {
            const projectsList = document.getElementById('projects-list');
            const projects = window.MyWorldAPI.state.projects;
            
            projectsList.innerHTML = projects.map(project => `
                <div class="project-item bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-4" data-id="${project.id}">
                    <img src="${project.image}" alt="${project.name}" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h3 class="font-['Space_Grotesk'] text-lg font-bold mb-1">${project.name}</h3>
                        <p class="text-[#B8B8C8] text-sm">${project.description}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="editProject('${project.id}')" class="w-10 h-10 rounded-lg bg-[#00F0FF]/10 border border-[#00F0FF]/30 flex items-center justify-center text-[#00F0FF] hover:bg-[#00F0FF] hover:text-white transition-all duration-300">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteProject('${project.id}')" class="w-10 h-10 rounded-lg bg-[#FF00E6]/10 border border-[#FF00E6]/30 flex items-center justify-center text-[#FF00E6] hover:bg-[#FF00E6] hover:text-white transition-all duration-300">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Load skills
        function loadSkills() {
            const skillsList = document.getElementById('skills-list');
            const skills = window.MyWorldAPI.state.skills;
            
            skillsList.innerHTML = skills.map(skill => `
                <div class="skill-item bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-4" data-id="${skill.id}">
                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-[${skill.color}]/20 to-[${skill.color}]/5 flex items-center justify-center">
                        <i class="fab ${skill.icon} text-[${skill.color}] text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="font-['Space_Grotesk'] text-lg font-bold mb-1">${skill.name}</h3>
                        <p class="text-[${skill.color}] text-sm">${skill.proficiency}%</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="editSkill('${skill.id}')" class="w-10 h-10 rounded-lg bg-[#00F0FF]/10 border border-[#00F0FF]/30 flex items-center justify-center text-[#00F0FF] hover:bg-[#00F0FF] hover:text-white transition-all duration-300">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteSkill('${skill.id}')" class="w-10 h-10 rounded-lg bg-[#FF00E6]/10 border border-[#FF00E6]/30 flex items-center justify-center text-[#FF00E6] hover:bg-[#FF00E6] hover:text-white transition-all duration-300">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Load tools
        function loadTools() {
            const toolsList = document.getElementById('tools-list');
            const tools = window.MyWorldAPI.state.tools;
            
            toolsList.innerHTML = tools.map(tool => `
                <div class="tool-item bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-4" data-id="${tool.id}">
                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-[${tool.color}]/20 to-[${tool.color}]/5 flex items-center justify-center">
                        <i class="fas ${tool.icon} text-[${tool.color}] text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="font-['Space_Grotesk'] text-lg font-bold mb-1">${tool.name}</h3>
                        <p class="text-[#B8B8C8] text-sm">${tool.description}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="editTool('${tool.id}')" class="w-10 h-10 rounded-lg bg-[#00F0FF]/10 border border-[#00F0FF]/30 flex items-center justify-center text-[#00F0FF] hover:bg-[#00F0FF] hover:text-white transition-all duration-300">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteTool('${tool.id}')" class="w-10 h-10 rounded-lg bg-[#FF00E6]/10 border border-[#FF00E6]/30 flex items-center justify-center text-[#FF00E6] hover:bg-[#FF00E6] hover:text-white transition-all duration-300">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Load stats
        function loadStats() {
            const stats = window.MyWorldAPI.state.stats;
            if (stats) {
                document.getElementById('experience').value = stats.experience || 0;
                document.getElementById('projects-count').value = stats.projects || 0;
                document.getElementById('clients').value = stats.clients || 0;
                document.getElementById('commits').value = stats.commits || 0;
            }
        }

        // Open modal
        function openModal(type, id = null) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            
            modal.classList.remove('hidden');
            
            if (type === 'project') {
                modalTitle.textContent = id ? '编辑项目' : '添加项目';
                modalBody.innerHTML = getProjectForm(id);
            } else if (type === 'skill') {
                modalTitle.textContent = id ? '编辑技能' : '添加技能';
                modalBody.innerHTML = getSkillForm(id);
            } else if (type === 'tool') {
                modalTitle.textContent = id ? '编辑工具' : '添加工具';
                modalBody.innerHTML = getToolForm(id);
            }
        }

        // Get project form
        function getProjectForm(id = null) {
            const project = id ? window.MyWorldAPI.state.projects.find(p => p.id === id) : null;
            return `
                <form id="project-form" class="space-y-4">
                    <div class="form-group">
                        <label for="project-name" class="block text-sm font-medium mb-2">项目名称</label>
                        <input type="text" id="project-name" name="name" value="${project ? project.name : ''}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="project-description" class="block text-sm font-medium mb-2">项目描述</label>
                        <textarea id="project-description" name="description" rows="3" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300 resize-none">${project ? project.description : ''}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="project-image" class="block text-sm font-medium mb-2">图片URL</label>
                        <input type="url" id="project-image" name="image" value="${project ? project.image : ''}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="project-tags" class="block text-sm font-medium mb-2">标签（用逗号分隔）</label>
                        <input type="text" id="project-tags" name="tags" value="${project ? project.tags.join(', ') : ''}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="project-link" class="block text-sm font-medium mb-2">项目链接</label>
                        <input type="url" id="project-link" name="link" value="${project ? project.link : '#'}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <button type="submit" class="btn btn-primary w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#00F0FF] to-[#00B8C4] text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(0,240,255,0.6)]">
                        <i class="fas fa-save"></i>
                        <span>${id ? '更新项目' : '添加项目'}</span>
                    </button>
                </form>
            `;
        }

        // Get skill form
        function getSkillForm(id = null) {
            const skill = id ? window.MyWorldAPI.state.skills.find(s => s.id === id) : null;
            return `
                <form id="skill-form" class="space-y-4">
                    <div class="form-group">
                        <label for="skill-name" class="block text-sm font-medium mb-2">技能名称</label>
                        <input type="text" id="skill-name" name="name" value="${skill ? skill.name : ''}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="skill-proficiency" class="block text-sm font-medium mb-2">熟练度 (%)</label>
                        <input type="number" id="skill-proficiency" name="proficiency" min="0" max="100" value="${skill ? skill.proficiency : 50}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="skill-icon" class="block text-sm font-medium mb-2">图标（Font Awesome）</label>
                        <input type="text" id="skill-icon" name="icon" value="${skill ? skill.icon : 'fa-code'}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="skill-color" class="block text-sm font-medium mb-2">颜色</label>
                        <input type="color" id="skill-color" name="color" value="${skill ? skill.color : '#00F0FF'}" required class="w-full h-14 px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <button type="submit" class="btn btn-primary w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#00F0FF] to-[#00B8C4] text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(0,240,255,0.6)]">
                        <i class="fas fa-save"></i>
                        <span>${id ? '更新技能' : '添加技能'}</span>
                    </button>
                </form>
            `;
        }

        // Get tool form
        function getToolForm(id = null) {
            const tool = id ? window.MyWorldAPI.state.tools.find(t => t.id === id) : null;
            return `
                <form id="tool-form" class="space-y-4">
                    <div class="form-group">
                        <label for="tool-name" class="block text-sm font-medium mb-2">工具名称</label>
                        <input type="text" id="tool-name" name="name" value="${tool ? tool.name : ''}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="tool-description" class="block text-sm font-medium mb-2">工具描述</label>
                        <textarea id="tool-description" name="description" rows="3" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300 resize-none">${tool ? tool.description : ''}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="tool-icon" class="block text-sm font-medium mb-2">图标（Font Awesome）</label>
                        <input type="text" id="tool-icon" name="icon" value="${tool ? tool.icon : 'fa-tools'}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="tool-link" class="block text-sm font-medium mb-2">工具链接</label>
                        <input type="url" id="tool-link" name="link" value="${tool ? tool.link : '#'}" required class="w-full px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white placeholder-[#B8B8C8] focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <div class="form-group">
                        <label for="tool-color" class="block text-sm font-medium mb-2">颜色</label>
                        <input type="color" id="tool-color" name="color" value="${tool ? tool.color : '#00F0FF'}" required class="w-full h-14 px-5 py-4 bg-white/5 border-2 border-white/10 rounded-xl text-white focus:outline-none focus:border-[#00F0FF] focus:shadow-[0_0_20px_rgba(0,240,255,0.3)] transition-all duration-300">
                    </div>
                    <button type="submit" class="btn btn-primary w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#00F0FF] to-[#00B8C4] text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_30px_rgba(0,240,255,0.6)]">
                        <i class="fas fa-save"></i>
                        <span>${id ? '更新工具' : '添加工具'}</span>
                    </button>
                </form>
            `;
        }

        // Edit functions
        function editProject(id) {
            openModal('project', id);
        }

        function editSkill(id) {
            openModal('skill', id);
        }

        function editTool(id) {
            openModal('tool', id);
        }

        // Delete functions
        function deleteProject(id) {
            if (confirm('确定要删除这个项目吗？')) {
                window.MyWorldAPI.deleteProject(id);
                loadProjects();
                window.MyWorldAPI.showNotification('项目删除成功！', 'success');
            }
        }

        function deleteSkill(id) {
            if (confirm('确定要删除这个技能吗？')) {
                window.MyWorldAPI.deleteSkill(id);
                loadSkills();
                window.MyWorldAPI.showNotification('技能删除成功！', 'success');
            }
        }

        function deleteTool(id) {
            if (confirm('确定要删除这个工具吗？')) {
                window.MyWorldAPI.deleteTool(id);
                loadTools();
                window.MyWorldAPI.showNotification('工具删除成功！', 'success');
            }
        }

        // Form submissions
        document.addEventListener('submit', function(e) {
            if (e.target.id === 'project-form') {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = Object.fromEntries(formData);
                data.tags = data.tags.split(',').map(tag => tag.trim());
                
                window.MyWorldAPI.createProject(data);
                loadProjects();
                document.getElementById('modal').classList.add('hidden');
                window.MyWorldAPI.showNotification('项目添加成功！', 'success');
            } else if (e.target.id === 'skill-form') {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = Object.fromEntries(formData);
                data.proficiency = parseInt(data.proficiency);
                
                window.MyWorldAPI.createSkill(data);
                loadSkills();
                document.getElementById('modal').classList.add('hidden');
                window.MyWorldAPI.showNotification('技能添加成功！', 'success');
            } else if (e.target.id === 'tool-form') {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = Object.fromEntries(formData);
                
                window.MyWorldAPI.createTool(data);
                loadTools();
                document.getElementById('modal').classList.add('hidden');
                window.MyWorldAPI.showNotification('工具添加成功！', 'success');
            }
        });
    </script>
</body>
</html>
